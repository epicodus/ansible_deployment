---
- name: copy dot files
  copy: src={{ item }} dest="{{ guest_path }}/.{{ item }}"
  with_items:
    - "{{ dot_files }}"

- name: copy pre-commit
  copy: src=pre-commit dest=/usr/local/share/git-core/templates/hooks/pre-commit

- name: change permissions for pre-commit
  file: path=/usr/local/share/git-core/templates/hooks/pre-commit mode=0755

- name: copy config_inc_php
  copy: src=config_inc_php dest="/usr/local/share/phpmyadmin/config.inc.php"

- name: add apache2 http.conf content
  blockinfile:
    dest: /usr/local/etc/apache2/2.4/httpd.conf
    content: |
      AddType application/x-httpd-php .php
      DirectoryIndex index.html index.php
      <Directory "/">
          Require all granted
      </Directory>
      LoadModule expires_module libexec/mod_expires.so
      LoadModule deflate_module libexec/mod_deflate.so
      LoadModule rewrite_module libexec/mod_rewrite.so
      Alias /phpmyadmin /usr/local/share/phpmyadmin
      <Directory /usr/local/share/phpmyadmin/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        <IfModule mod_authz_core.c>
          Require all granted
        </IfModule>
        <IfModule !mod_authz_core.c>
          Order allow,deny
          Allow from all
        </IfModule>
      </Directory>
      ServerName localhost
